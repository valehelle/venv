from .models import StreamItem,StreamFeed,StreamFollowing


class ManyToManyDatabaseBackend(object):

    def add_stream_item(self, users, content, created_at):
        item = StreamItem.objects.create(content=content, created_at=created_at)
        item.users.add(*[user.pk for user in users])
    def add_stream_feed(self, users, content, created_at):
        item = StreamFeed.objects.create(content=content, created_at=created_at)
        item.users.add(*[user.pk for user in users])
    def add_stream_following(self, users, content, created_at):
        item = StreamFollowing.objects.create(content=content, created_at=created_at)
        item.users.add(*[user.pk for user in users])
		

    def get_stream_items(self, user):
        return StreamItem.objects.filter(users=user)
    def get_stream_feed(self, user):
        return StreamFeed.objects.filter(users=user)
    def get_stream_following(self, user):
        return StreamFollowing.objects.filter(users=user)
